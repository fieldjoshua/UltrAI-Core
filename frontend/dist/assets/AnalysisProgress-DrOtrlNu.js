import{c as N,r as i,j as e,B as b,X as w}from"./index-DgTm5c8-.js";import{C as z}from"./circle-alert-DmOCy8NO.js";import{C}from"./circle-check-big-Dx7n_fkU.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=N("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),h=i.forwardRef(({className:r="",value:s=0,max:a=100,...t},o)=>{const n=s.toString(),m=a.toString();return e.jsx("div",{ref:o,role:"progressbar","aria-valuemin":"0","aria-valuemax":m,"aria-valuenow":n,className:`relative h-2 w-full overflow-hidden rounded-full bg-gray-100 ${r}`,...t,children:e.jsx("div",{className:"h-full w-full flex-1 bg-blue-600 transition-all",style:{transform:`translateX(-${100-s/a*100}%)`}})})});h.displayName="Progress";const P=({status:r,currentStep:s=0,totalSteps:a=1,estimatedTimeRemaining:t,statusMessage:o,error:n,onCancel:m})=>{const[p,g]=i.useState(0),[d,y]=i.useState(0),[f]=i.useState(Date.now());i.useEffect(()=>{if(r==="idle")g(0);else if(r==="complete")g(100);else if(r!=="error"){const l=a>0?s/a*100:0;g(Math.min(Math.max(l,0),99))}},[r,s,a]),i.useEffect(()=>{let l;return(r==="preparing"||r==="analyzing")&&(l=setInterval(()=>{y(Math.floor((Date.now()-f)/1e3))},1e3)),()=>{l&&clearInterval(l)}},[r,f]);const x=l=>{if(l<60)return`${l}s`;const c=Math.floor(l/60),u=l%60;return`${c}m ${u}s`},j=()=>{switch(r){case"idle":return e.jsx($,{className:"h-5 w-5 text-gray-500"});case"preparing":case"analyzing":return e.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});case"complete":return e.jsx(C,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(z,{className:"h-5 w-5 text-red-500"});default:return null}},v=()=>{if(o)return o;switch(r){case"idle":return"Waiting to start analysis...";case"preparing":return"Preparing analysis...";case"analyzing":return s&&a?`Analyzing (Step ${s} of ${a})...`:"Analyzing...";case"complete":return"Analysis complete";case"error":return(n==null?void 0:n.message)||"An error occurred during analysis";default:return""}};return e.jsxs("div",{className:`rounded-lg p-4 ${r==="error"?"bg-red-50":r==="complete"?"bg-green-50":"bg-blue-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[j(),e.jsx("span",{className:`ml-2 font-medium ${r==="error"?"text-red-700":r==="complete"?"text-green-700":"text-blue-700"}`,children:v()})]}),e.jsx(h,{value:p,className:`h-2 ${r==="error"?"bg-red-100":r==="complete"?"bg-green-100":"bg-blue-100"}`}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[e.jsx("div",{className:"text-gray-600",children:r==="preparing"||r==="analyzing"?e.jsxs(e.Fragment,{children:["Elapsed time: ",x(d)]}):r==="complete"?e.jsxs(e.Fragment,{children:["Total time: ",x(d)]}):null}),e.jsx("div",{className:"text-gray-600",children:t!==void 0&&r!=="complete"&&r!=="error"&&e.jsxs(e.Fragment,{children:["Est. remaining: ",x(t)]})})]}),a>1&&r!=="idle"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[s," of ",a," steps"]})]}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:a}).map((l,c)=>e.jsx("div",{className:`h-1.5 rounded-full flex-1 ${c<s?"bg-blue-500":c===s&&(r==="preparing"||r==="analyzing")?"bg-blue-300":"bg-gray-200"}`},c))})]}),r==="error"&&n&&e.jsx("div",{className:"mt-3 p-2 bg-red-100 rounded text-sm text-red-800",children:n.message}),(r==="preparing"||r==="analyzing")&&m&&e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs(b,{variant:"ghost",size:"sm",onClick:m,className:"text-gray-500 hover:text-gray-700",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),"Cancel"]})})]})};export{P as A};
//# sourceMappingURL=AnalysisProgress-DrOtrlNu.js.map
