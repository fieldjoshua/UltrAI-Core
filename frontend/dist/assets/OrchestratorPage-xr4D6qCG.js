import{j as e,i as G,Q as D,U as V,r as l,V as H,W as Q,X,Y}from"./index-BDDKbJ6b.js";import{L as J}from"./label-B8vuLGzu.js";import{A as K}from"./AnalysisProgress-U0iTtO_Q.js";import"./circle-alert-CaHEdPdp.js";import"./circle-check-big-Cct5hwUl.js";const Z=({patterns:m,selectedPattern:j,onPatternChange:a,disabled:x=!1})=>e.jsxs(G,{className:"w-full p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Analysis Pattern"}),e.jsx(D,{value:j,onValueChange:a,disabled:x,className:"space-y-4",children:m.map(n=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(V,{value:n.id,id:n.id}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(J,{htmlFor:n.id,className:"font-medium",children:n.name}),e.jsx("p",{className:"text-sm text-gray-500",children:n.description})]})]},n.id))})]}),ee=()=>{const[m,j]=l.useState(""),[a,x]=l.useState([]),[n,w]=l.useState(""),[f,S]=l.useState("comparative"),[y,U]=l.useState("gut"),[c,L]=l.useState(!0),[d,O]=l.useState([]),[R,P]=l.useState([]),[M,k]=l.useState(!1),[F,A]=l.useState(!1),[r,C]=l.useState(null),[h,I]=l.useState(!1),[g,p]=l.useState(null),[z,o]=l.useState("idle"),[E,N]=l.useState(0),[$,u]=l.useState(""),[v,B]=l.useState(!1);l.useEffect(()=>{const s=async()=>{k(!0);try{const i=await H();O(i),i.length>0&&(x([i[0]]),w(i[0]))}catch(i){p("Failed to load available models"),console.error("Model loading error:",i)}finally{k(!1)}},t=async()=>{A(!0);try{const i=await Q();P(i)}catch(i){console.error("Pattern loading error:",i),P([{name:"gut",description:"Gut-based intuitive analysis"},{name:"confidence",description:"Confidence scoring and agreement tracking"},{name:"critique",description:"Structured critique and revision process"},{name:"fact_check",description:"Rigorous fact-checking process"},{name:"perspective",description:"Multi-perspective analysis"},{name:"scenario",description:"Scenario-based analysis"}])}finally{A(!1)}};s(),t()},[]);const _=s=>{a.includes(s)?a.length>1&&s!==n&&x(a.filter(t=>t!==s)):x([...a,s])},W=s=>{w(s),a.includes(s)||x([...a,s])},q=()=>{const s=[{stage:1,message:"Stage 1: Initial Response - Getting parallel responses from selected models..."},{stage:2,message:"Stage 2: Peer Review & Revision - Models reviewing and refining responses..."},{stage:3,message:"Stage 3: Ultra Synthesis™ - Creating comprehensive final synthesis..."}];let t=0;o("analyzing"),N(1),u(s[0].message);const i=setInterval(()=>{t++,t<s.length?(N(s[t].stage),u(s[t].message)):(clearInterval(i),o("complete"),N(3),u("Ultra Synthesis™ orchestration complete"))},2e3);return i},T=async s=>{if(s.preventDefault(),!m.trim()){p("Please enter a prompt");return}if(a.length<2){p("Please select at least two models");return}I(!0),p(null),C(null);try{let t;if(c){o("preparing"),u("Preparing Ultra Synthesis™ pipeline...");const i=q();t=await X({prompt:m,models:a,pattern:y,ultraModel:n||a[0],outputFormat:"plain"}),clearInterval(i),o("complete")}else o("analyzing"),u("Processing with legacy orchestration..."),t=await Y({prompt:m,models:a,leadModel:n||a[0],analysisType:f}),o("complete");C(t)}catch(t){p(`Error processing request: ${t.message}`),o("error"),console.error("Processing error:",t)}finally{I(!1)}},b=s=>{const t=s.split("-");return t.length>1?`${t[0].charAt(0).toUpperCase()+t[0].slice(1)} ${t[1].toUpperCase()}`:s};return e.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"UltrAI Orchestrator"}),e.jsx("p",{className:"text-gray-600",children:"Experience the power of Ultra Synthesis™ - multi-model intelligence multiplication"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Orchestration Mode"}),e.jsx("p",{className:"text-sm text-blue-700",children:c?"Ultra Synthesis™ - 3-Stage intelligence multiplication pipeline":"Legacy Mode - Basic multi-model comparison"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:s=>L(s.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Use Ultra Synthesis™ Orchestration"})]})]})}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:e.jsx("p",{className:"text-red-700",children:g})}),h&&c&&e.jsx("div",{className:"mb-6",children:e.jsx(K,{status:z,currentStep:E,totalSteps:4,statusMessage:$,error:g?new Error(g):void 0})}),d.length<2&&!M&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800",children:"Service Unavailable"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:["UltraAI requires at least 2 different AI models for its multi-model orchestration system. Currently, only ",d.length," model",d.length===1?" is":"s are"," available."]}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Please ensure API keys are configured for at least 2 different AI providers."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:T,className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-700 mb-2",children:"Analysis Prompt"}),e.jsx("textarea",{id:"prompt","data-testid":"prompt-input",value:m,onChange:s=>j(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:"Enter your prompt for sophisticated multi-LLM analysis..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Select AI Models (",a.length," selected)"]}),M?e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 p-4 border rounded-md",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Loading available models..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:d.map(s=>e.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${a.includes(s)?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-gray-300"}`,onClick:()=>_(s),children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:`model-${s}`,checked:a.includes(s),onChange:()=>_(s),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`model-${s}`,className:"font-medium text-sm cursor-pointer",children:b(s)}),a.includes(s)&&e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"flex items-center text-xs text-gray-600",children:[e.jsx("input",{type:"radio",id:`lead-${s}`,name:"leadModel",checked:n===s,onChange:()=>W(s),className:"mr-1"}),"Ultra synthesis model"]})})]})]})})},s))})]}),!c&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Legacy Analysis Type"}),e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"analysisType",value:"comparative",checked:f==="comparative",onChange:()=>S("comparative"),className:"mr-2"}),e.jsx("span",{children:"Comparative Analysis"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"analysisType",value:"factual",checked:f==="factual",onChange:()=>S("factual"),className:"mr-2"}),e.jsx("span",{children:"Factual Analysis"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit","data-testid":"run-analysis",disabled:h||d.length<2,title:d.length<2?"At least 2 AI models required for orchestration":"",className:`px-6 py-3 rounded-lg font-medium transition-all ${h||d.length<2?"bg-gray-300 text-gray-500 cursor-not-allowed":c?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg":"bg-blue-600 text-white hover:bg-blue-700"}`,children:d.length<2?"Insufficient Models (2+ Required)":h?c?"Running Ultra Synthesis™...":"Processing...":c?"Start Ultra Synthesis™":"Generate Response"})})]})}),e.jsx("div",{className:"lg:col-span-1",children:c&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Analysis Pattern"}),F?e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 p-4",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Loading patterns..."})]}):e.jsx(Z,{patterns:R.map(s=>({id:s.name,name:s.name,description:s.description})),selectedPattern:y,onPatternChange:U,disabled:h}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Patent-Protected:"})," Ultra Synthesis™ represents sophisticated intellectual property with 3-stage intelligence multiplication."]})})]})})]}),r&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Analysis Results"}),r.processing_time&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Processing time: ",r.processing_time.toFixed(2),"s"]})]}),c&&r.status==="success"&&e.jsxs("div",{className:"space-y-6",children:[r.ultra_response&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Ultra Synthesis™"}),e.jsx("div",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:"Intelligence Multiplication Complete"})]}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 p-8 rounded-xl border-2 border-gradient-to-r from-purple-200 to-blue-200 shadow-lg",children:e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{"data-testid":"ultra-synthesis",className:"text-lg leading-relaxed text-gray-800 whitespace-pre-wrap font-medium",children:r.ultra_response})})}),e.jsx("div",{className:"mt-4 bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-medium",children:"Pattern:"}),e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:r.pattern_used||y})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-medium",children:"Models Used:"}),e.jsx("span",{className:"text-gray-700",children:r.models_used?r.models_used.join(", "):a.join(", ")})]})]})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("button",{onClick:()=>B(!v),className:"flex items-center justify-between w-full text-left text-lg font-semibold text-gray-700 hover:text-gray-900 transition-colors",children:[e.jsx("span",{children:"Detailed Analysis Breakdown"}),e.jsx("svg",{className:`w-5 h-5 transform transition-transform ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&e.jsxs("div",{className:"mt-6 space-y-6",children:[r.initial_responses&&Object.keys(r.initial_responses).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm mr-2",children:"1"}),"Initial Analysis Responses"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(r.initial_responses).map(([s,t])=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[b(s),n&&n.includes(s)&&e.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Ultra Model"})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap text-gray-700",children:t})]},s))})]}),r.meta_responses&&Object.keys(r.meta_responses).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm mr-2",children:"2"}),"Meta Analysis"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(r.meta_responses).map(([s,t])=>e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium mb-2",children:b(s)}),e.jsx("p",{className:"text-sm whitespace-pre-wrap text-gray-700",children:t})]},s))})]}),r.peer_review_responses&&Object.keys(r.peer_review_responses).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm mr-2",children:"2"}),"Peer Review & Revision"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(r.peer_review_responses).map(([s,t])=>e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[b(s),e.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Peer-Reviewed"})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap text-gray-700",children:t})]},s))})]})]})]})]}),!c&&e.jsxs("div",{className:"space-y-6",children:[r.initial_responses&&r.initial_responses.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Model Responses"}),e.jsx("div",{className:"space-y-4",children:r.initial_responses.map((s,t)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[e.jsxs("h4",{className:"font-medium mb-2",children:[s.model," (",s.provider,")",n===s.model&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Primary"})]}),e.jsx("p",{className:"whitespace-pre-wrap text-sm",children:s.response})]},t))})]}),r.synthesis&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Synthesized Response"}),e.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Synthesized by ",r.synthesis.model," (",r.synthesis.provider,")"]}),e.jsx("p",{className:"whitespace-pre-wrap",children:r.synthesis.response})]})]})]}),r.status==="error"&&e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700",children:r.error||"An unknown error occurred"})]})]})]})},ie=()=>e.jsxs("div",{className:"container mx-auto py-6 px-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"UltrAI Orchestrator"}),e.jsx(ee,{})]});export{ie as default};
//# sourceMappingURL=OrchestratorPage-xr4D6qCG.js.map
