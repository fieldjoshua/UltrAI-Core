const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnalysisPatternSelector-YhglIRB5.js","assets/ui-vendor-D6E6Lg3s.js","assets/react-vendor-B5BC_0HN.js","assets/index-CeP_U5ua.js","assets/utils-vendor-BJC98ddP.js","assets/state-vendor-BeGIuX5n.js","assets/index-CPLM5gex.css","assets/label-68C9EPiM.js","assets/SSEPanel-HKPUuciR.js"])))=>i.map(i=>d[i]);
import{j as e}from"./ui-vendor-D6E6Lg3s.js";import{j as ee,k as se,p as te,l as re,_ as z}from"./index-CeP_U5ua.js";import{a as l,c as M}from"./react-vendor-B5BC_0HN.js";import{A as ae}from"./AnalysisProgress-o2HkuIxU.js";import"./utils-vendor-BJC98ddP.js";import"./state-vendor-BeGIuX5n.js";import"./circle-alert-DSb5ozvh.js";import"./circle-check-big-04CHU4xb.js";const le=M.lazy(()=>z(()=>import("./AnalysisPatternSelector-YhglIRB5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(o=>({default:o.AnalysisPatternSelector}))),ie=M.lazy(()=>z(()=>import("./SSEPanel-HKPUuciR.js"),__vite__mapDeps([8,1,2]))),ne=()=>{const[o,A]=l.useState(""),[i,x]=l.useState([]),[d,N]=l.useState(""),[w,k]=l.useState("comparative"),[h,I]=l.useState("gut"),[n,q]=l.useState(!0),[c,B]=l.useState([]),[D,C]=l.useState([]),[S,O]=l.useState(!1),[W,U]=l.useState(!1),[a,L]=l.useState(null),[g,R]=l.useState(!1),[f,u]=l.useState(null),[G,J]=l.useState(""),[V,m]=l.useState("idle"),[H,_]=l.useState(0),[K,b]=l.useState(""),[P,Q]=l.useState(!1),[j,E]=l.useState({visible:!1,type:"info",message:""}),p=(s,r,t=3500)=>{E({visible:!0,type:s,message:r}),window.clearTimeout(p._t),p._t=window.setTimeout(()=>E({visible:!1,type:"info",message:""}),t)};l.useEffect(()=>{try{const t=JSON.parse(localStorage.getItem("orchestrator_session")||"null");t&&(typeof t.prompt=="string"&&A(t.prompt),Array.isArray(t.selectedModels)&&x(t.selectedModels),typeof t.leadModel=="string"&&N(t.leadModel),typeof t.selectedPattern=="string"&&I(t.selectedPattern))}catch{}const s=async()=>{O(!0);try{const t=await ee();B(t),t.length>0&&(x([t[0]]),N(t[0]))}catch(t){u("Failed to load available models"),console.error("Model loading error:",t)}finally{O(!1)}},r=async()=>{U(!0);try{const t=await se();C(t)}catch(t){console.error("Pattern loading error:",t),C([{name:"gut",description:"Gut-based intuitive analysis"},{name:"confidence",description:"Confidence scoring and agreement tracking"},{name:"critique",description:"Structured critique and revision process"},{name:"fact_check",description:"Rigorous fact-checking process"},{name:"perspective",description:"Multi-perspective analysis"},{name:"scenario",description:"Scenario-based analysis"}])}finally{U(!1)}};s(),r()},[]),l.useEffect(()=>{try{localStorage.setItem("orchestrator_session",JSON.stringify({prompt:o,selectedModels:i,leadModel:d,selectedPattern:h}))}catch{}},[o,i,d,h]);const $=s=>{i.includes(s)?i.length>1&&s!==d&&x(i.filter(r=>r!==s)):x([...i,s])},X=s=>{N(s),i.includes(s)||x([...i,s])},Y=()=>{const s=[{stage:1,message:"Stage 1: Initial Response - Getting parallel responses from selected models..."},{stage:2,message:"Stage 2: Peer Review & Revision - Models reviewing and refining responses..."},{stage:3,message:"Stage 3: Ultra Synthesis™ - Creating comprehensive final synthesis..."}];let r=0;m("analyzing"),_(1),b(s[0].message);const t=setInterval(()=>{r++,r<s.length?(_(s[r].stage),b(s[r].message)):(clearInterval(t),m("complete"),_(3),b("Ultra Synthesis™ orchestration complete"))},2e3);return t},Z=async s=>{var r;if(s.preventDefault(),!o.trim()){u("Please enter a prompt");return}if(i.length<2){u("Please select at least two models");return}R(!0),u(null),L(null);try{let t;const T=`corr_${Math.random().toString(36).slice(2,12)}`;if(J(T),n){m("preparing"),b("Preparing Ultra Synthesis™ pipeline...");const y=Y();t=await te({prompt:o,models:i,pattern:h,ultraModel:d||i[0],outputFormat:"plain"},T),clearInterval(y),m("complete")}else m("analyzing"),b("Processing with legacy orchestration..."),t=await re({prompt:o,models:i,leadModel:d||i[0],analysisType:w}),m("complete");L(t);try{if(t&&t.status==="success"){const F=typeof t.processing_time=="number"?t.processing_time.toFixed(2):void 0;p("success",`Analysis completed${F?` in ${F}s`:""}.`)}else t&&t.status==="error"&&p("error",t.error||"Analysis failed");const y=(r=t==null?void 0:t.pipeline_info)==null?void 0:r.service_status;y&&p("warning",y)}catch{}}catch(t){u(`Error processing request: ${t.message}`),m("error"),console.error("Processing error:",t),p("error",t.message||"Processing error")}finally{R(!1)}},v=s=>{const r=s.split("-");return r.length>1?`${r[0].charAt(0).toUpperCase()+r[0].slice(1)} ${r[1].toUpperCase()}`:s};return e.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"UltrAI Orchestrator"}),e.jsx("p",{className:"text-gray-600",children:"Experience the power of Ultra Synthesis™ - multi-model intelligence multiplication"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Orchestration Mode"}),e.jsx("p",{className:"text-sm text-blue-700",children:n?"Ultra Synthesis™ - 3-Stage intelligence multiplication pipeline":"Legacy Mode - Basic multi-model comparison"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:s=>q(s.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Use Ultra Synthesis™ Orchestration (recommended)"})]})]})}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:e.jsx("p",{className:"text-red-700",children:f})}),g&&n&&e.jsx("div",{className:"mb-6",children:e.jsx(ae,{status:V,currentStep:H,totalSteps:4,statusMessage:K,error:f?new Error(f):void 0})}),c.length<2&&!S&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800",children:"Service Unavailable"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:["UltraAI requires at least 2 different AI models for its multi-model orchestration system. Currently, only"," ",c.length," model",c.length===1?" is":"s are"," available."]}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Please ensure API keys are configured for at least 2 different AI providers."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:Z,className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-700 mb-2",children:"Analysis Prompt"}),e.jsx("textarea",{id:"prompt","data-testid":"prompt-input",value:o,onChange:s=>A(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:"Enter your prompt for sophisticated multi-LLM analysis..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Select AI Models (",i.length," selected)"]}),S?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Array.from({length:6}).map((s,r)=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})},r))}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:c.map(s=>e.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${i.includes(s)?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-gray-300"}`,onClick:()=>$(s),children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:`model-${s}`,checked:i.includes(s),onChange:()=>$(s),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`model-${s}`,className:"font-medium text-sm cursor-pointer",children:v(s)}),i.includes(s)&&e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"flex items-center text-xs text-gray-600",children:[e.jsx("input",{type:"radio",id:`lead-${s}`,name:"leadModel",checked:d===s,onChange:()=>X(s),className:"mr-1"}),"Ultra synthesis model"]})})]})]})})},s))})]}),c.length<2&&!S&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["At least two models are required."," ",e.jsx("a",{href:"/admin",className:"text-blue-600 underline",children:"Configure API keys"})]}),!n&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Basic Analysis Type (legacy display)"}),e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"analysisType",value:"comparative",checked:w==="comparative",onChange:()=>k("comparative"),className:"mr-2"}),e.jsx("span",{children:"Comparative Analysis"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"analysisType",value:"factual",checked:w==="factual",onChange:()=>k("factual"),className:"mr-2"}),e.jsx("span",{children:"Factual Analysis"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit","data-testid":"run-analysis",disabled:g||c.length<2,title:c.length<2?"At least 2 AI models required for orchestration":"",className:`px-6 py-3 rounded-lg font-medium transition-all ${g||c.length<2?"bg-gray-300 text-gray-500 cursor-not-allowed":n?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg":"bg-blue-600 text-white hover:bg-blue-700"}`,children:c.length<2?"Insufficient Models (2+ Required)":g?n?"Running Ultra Synthesis™...":"Processing...":n?"Start Ultra Synthesis™":"Generate Response"})})]})}),e.jsx("div",{className:"lg:col-span-1",children:n&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Analysis Pattern"}),W?e.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((s,r)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},r))}):e.jsx(le,{patterns:D.map(s=>({id:s.name,name:s.name,description:s.description})),selectedPattern:h,onPatternChange:I,disabled:g}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Patent-Protected:"})," Ultra Synthesis™ represents sophisticated intellectual property with 3-stage intelligence multiplication."]})}),e.jsx("div",{className:"mt-6",children:e.jsx(M.Suspense,{fallback:e.jsx("div",{className:"text-sm text-gray-500",children:"Loading live events…"}),children:e.jsx(ie,{correlationId:G,title:"Live Model Events"})})})]})})]}),a&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Analysis Results"}),a.processing_time&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Processing time: ",a.processing_time.toFixed(2),"s"]})]}),n&&a.status==="success"&&e.jsxs("div",{className:"space-y-6",children:[a.ultra_response&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Ultra Synthesis™"}),e.jsx("div",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:"Intelligence Multiplication Complete"})]}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 p-8 rounded-xl border-2 border-gradient-to-r from-purple-200 to-blue-200 shadow-lg",children:e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{"data-testid":"ultra-synthesis",className:"text-lg leading-relaxed text-gray-800 whitespace-pre-wrap font-medium",children:a.ultra_response})})}),e.jsx("div",{className:"mt-4 bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-medium",children:"Pattern:"}),e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:a.pattern_used||h})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-medium",children:"Models Used:"}),e.jsx("span",{className:"text-gray-700",children:a.models_used?a.models_used.join(", "):i.join(", ")})]})]})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("button",{onClick:()=>Q(!P),className:"flex items-center justify-between w-full text-left text-lg font-semibold text-gray-700 hover:text-gray-900 transition-colors",children:[e.jsx("span",{children:"Detailed Analysis Breakdown"}),e.jsx("svg",{className:`w-5 h-5 transform transition-transform ${P?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),P&&e.jsxs("div",{className:"mt-6 space-y-6",children:[a.initial_responses&&Object.keys(a.initial_responses).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm mr-2",children:"1"}),"Initial Analysis Responses"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(a.initial_responses).map(([s,r])=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[v(s),d&&d.includes(s)&&e.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Ultra Model"})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap text-gray-700",children:r})]},s))})]}),a.meta_responses&&Object.keys(a.meta_responses).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm mr-2",children:"2"}),"Meta Analysis"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(a.meta_responses).map(([s,r])=>e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium mb-2",children:v(s)}),e.jsx("p",{className:"text-sm whitespace-pre-wrap text-gray-700",children:r})]},s))})]}),a.peer_review_responses&&Object.keys(a.peer_review_responses).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm mr-2",children:"2"}),"Peer Review & Revision"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(a.peer_review_responses).map(([s,r])=>e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[v(s),e.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Peer-Reviewed"})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap text-gray-700",children:r})]},s))})]})]})]})]}),!n&&e.jsxs("div",{className:"space-y-6",children:[a.initial_responses&&a.initial_responses.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Model Responses"}),e.jsx("div",{className:"space-y-4",children:a.initial_responses.map((s,r)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[e.jsxs("h4",{className:"font-medium mb-2",children:[s.model," (",s.provider,")",d===s.model&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Primary"})]}),e.jsx("p",{className:"whitespace-pre-wrap text-sm",children:s.response})]},r))})]}),a.synthesis&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Synthesized Response"}),e.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Synthesized by ",a.synthesis.model," (",a.synthesis.provider,")"]}),e.jsx("p",{className:"whitespace-pre-wrap",children:a.synthesis.response})]})]})]}),a.status==="error"&&e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700",children:a.error||"An unknown error occurred"})]})]}),j.visible&&e.jsx("div",{className:`fixed bottom-6 right-6 z-50 px-4 py-3 rounded shadow-lg text-sm ${j.type==="success"?"bg-green-600 text-white":j.type==="warning"?"bg-yellow-600 text-white":j.type==="error"?"bg-red-600 text-white":"bg-gray-800 text-white"}`,role:"status",children:j.message})]})},ue=()=>e.jsxs("div",{className:"container mx-auto py-6 px-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"UltrAI Orchestrator"}),e.jsx(ne,{})]});export{ue as default};
//# sourceMappingURL=OrchestratorPage-C8S6Mboc.js.map
