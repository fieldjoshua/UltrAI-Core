import{w as x,x as b,y as D,z as w,r as m,A as k,j as e,D as C,E as S,G as U,H as M,J as F,K as T}from"./index-C_d5_QDd.js";function p(s=x){const r=s===x?b:D(s);return function(){const{store:n}=r();return n}}const B=p();function L(s=x){const r=s===x?B:p(s);return function(){return r().dispatch}}const P=L(),f=()=>P(),j=w,R=()=>{const s=f(),{documents:r,selectedDocuments:o,isLoading:n,error:c}=j(t=>t.documents);m.useEffect(()=>{s(k())},[s]);const i=t=>{window.confirm("Are you sure you want to delete this document?")&&s(S(t))},l=t=>{s(C(t))};return n&&r.length===0?e.jsx("div",{className:"flex justify-center p-8",children:"Loading documents..."}):c?e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative my-4",children:["Error: ",c]}):r.length===0?e.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"No documents yet"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Upload documents to get started with analysis"})]}):e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Documents"}),e.jsx("div",{className:"overflow-hidden bg-white shadow sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:r.map(t=>e.jsx("li",{className:"relative",children:e.jsx("div",{className:"flex items-center px-4 py-4 sm:px-6 hover:bg-gray-50",children:e.jsxs("div",{className:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:o.includes(t.id),onChange:()=>l(t.id)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"flex text-sm font-medium text-indigo-600 truncate",children:t.name}),e.jsx("div",{className:"mt-2 flex",children:e.jsx("div",{className:"flex items-center text-sm text-gray-500",children:e.jsxs("span",{children:[t.type," â€¢ ",$(t.size)]})})}),e.jsxs("div",{className:"flex mt-1",children:[e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="uploaded"?"bg-green-100 text-green-800":t.status==="processing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["Uploaded:"," ",new Date(t.uploadDate).toLocaleDateString()]})]})]})]}),e.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:e.jsx("button",{onClick:()=>i(t.id),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Delete"})})]})})},t.id))})})]})},$=s=>{if(s===0)return"0 Bytes";const r=1024,o=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(s)/Math.log(r));return parseFloat((s/Math.pow(r,n)).toFixed(2))+" "+o[n]},A=async s=>{const r=new FormData;return r.append("file",s),U({url:M.documents.upload,method:"POST",data:r,headers:{"Content-Type":"multipart/form-data"}})},E=()=>{const s=f(),{isLoading:r,uploadProgress:o,error:n}=j(a=>a.documents),[c,i]=m.useState(!1),l=m.useRef(null),t=a=>{const d=a.target.files;d&&d.length>0&&h(d[0])},u=a=>{a.preventDefault(),a.stopPropagation(),a.type==="dragenter"||a.type==="dragover"?i(!0):a.type==="dragleave"&&i(!1)},v=a=>{a.preventDefault(),a.stopPropagation(),i(!1),a.dataTransfer.files&&a.dataTransfer.files.length>0&&h(a.dataTransfer.files[0])},h=async a=>{try{const d=g=>{const N=Math.round(g.loaded*100/g.total);s(F(N))},z=await A(a);s(T(a)),l.current&&(l.current.value="")}catch(d){console.error("Upload failed:",d)}},y=()=>{l.current&&l.current.click()};return e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Upload Document"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center ${c?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:border-indigo-400"}`,onDragEnter:u,onDragLeave:u,onDragOver:u,onDrop:v,children:[e.jsx("input",{type:"file",className:"hidden",ref:l,onChange:t,accept:".pdf,.doc,.docx,.txt,.md","aria-label":"Upload document"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("div",{className:"flex text-sm text-gray-600",children:e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer",children:[e.jsx("span",{className:"text-indigo-600 hover:text-indigo-500",children:"Upload a file"}),e.jsx("span",{className:"pl-1",children:"or drag and drop"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX, TXT, MD up to 10MB"})]})]}),r&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-indigo-600 h-2.5 rounded-full",style:{width:`${o}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Uploading: ",o,"%"]})]}),n&&e.jsxs("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:["Error: ",n]}),e.jsx("button",{type:"button",onClick:y,disabled:r,className:`mt-4 w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white ${r?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}`,children:r?"Uploading...":"Select File"})]})},O=()=>e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Document Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(R,{})}),e.jsx("div",{children:e.jsx(E,{})})]})]});export{O as default};
//# sourceMappingURL=DocumentsPage-N0t7MBAS.js.map
