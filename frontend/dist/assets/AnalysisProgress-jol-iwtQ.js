import{c as X,l as q,r as s,K as J,j as r,m as Q,P as _,D,i as Z,k as H,M as ee,N as O,B as ne,X as te}from"./index-VL9iFoVk.js";import{C as re}from"./circle-alert-9oqjRPx5.js";import{C as oe}from"./circle-check-big-C4FMFY1O.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function A(e,n,{checkForDefaultPrevented:t=!0}={}){return function(i){if(e==null||e(i),t===!1||!i.defaultPrevented)return n==null?void 0:n(i)}}var E="rovingFocusGroup.onEntryFocus",ae={bubbles:!1,cancelable:!0},T="RovingFocusGroup",[P,U,ie]=J(T),[ce,Ae]=q(T,[ie]),[le,ue]=ce(T),k=s.forwardRef((e,n)=>r.jsx(P.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(P.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(de,{...e,ref:n})})}));k.displayName=T;var de=s.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:t,orientation:o,loop:i=!1,dir:d,currentTabStopId:g,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:m,onEntryFocus:c,preventScrollOnEntryFocus:l=!1,...p}=e,x=s.useRef(null),f=D(n,x),y=Z(d),[u,a]=H({prop:g,defaultProp:b??null,onChange:m,caller:T}),[N,R]=s.useState(!1),h=ee(c),w=U(t),C=s.useRef(!1),[$,S]=s.useState(0);return s.useEffect(()=>{const v=x.current;if(v)return v.addEventListener(E,h),()=>v.removeEventListener(E,h)},[h]),r.jsx(le,{scope:t,orientation:o,dir:y,loop:i,currentTabStopId:u,onItemFocus:s.useCallback(v=>a(v),[a]),onItemShiftTab:s.useCallback(()=>R(!0),[]),onFocusableItemAdd:s.useCallback(()=>S(v=>v+1),[]),onFocusableItemRemove:s.useCallback(()=>S(v=>v-1),[]),children:r.jsx(_.div,{tabIndex:N||$===0?-1:0,"data-orientation":o,...p,ref:f,style:{outline:"none",...e.style},onMouseDown:A(e.onMouseDown,()=>{C.current=!0}),onFocus:A(e.onFocus,v=>{const B=!C.current;if(v.target===v.currentTarget&&B&&!N){const M=new CustomEvent(E,ae);if(v.currentTarget.dispatchEvent(M),!M.defaultPrevented){const j=w().filter(I=>I.focusable),W=j.find(I=>I.active),V=j.find(I=>I.id===u),Y=[W,V,...j].filter(Boolean).map(I=>I.ref.current);z(Y,l)}}C.current=!1}),onBlur:A(e.onBlur,()=>R(!1))})})}),L="RovingFocusGroupItem",G=s.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:t,focusable:o=!0,active:i=!1,tabStopId:d,children:g,...b}=e,m=Q(),c=d||m,l=ue(L,t),p=l.currentTabStopId===c,x=U(t),{onFocusableItemAdd:f,onFocusableItemRemove:y,currentTabStopId:u}=l;return s.useEffect(()=>{if(o)return f(),()=>y()},[o,f,y]),r.jsx(P.ItemSlot,{scope:t,id:c,focusable:o,active:i,children:r.jsx(_.span,{tabIndex:p?0:-1,"data-orientation":l.orientation,...b,ref:n,onMouseDown:A(e.onMouseDown,a=>{o?l.onItemFocus(c):a.preventDefault()}),onFocus:A(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:A(e.onKeyDown,a=>{if(a.key==="Tab"&&a.shiftKey){l.onItemShiftTab();return}if(a.target!==a.currentTarget)return;const N=ge(a,l.orientation,l.dir);if(N!==void 0){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let h=x().filter(w=>w.focusable).map(w=>w.ref.current);if(N==="last")h.reverse();else if(N==="prev"||N==="next"){N==="prev"&&h.reverse();const w=h.indexOf(a.currentTarget);h=l.loop?pe(h,w+1):h.slice(w+1)}setTimeout(()=>z(h))}}),children:typeof g=="function"?g({isCurrentTabStop:p,hasTabStop:u!=null}):g})})});G.displayName=L;var me={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fe(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ge(e,n,t){const o=fe(e.key,t);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return me[o]}function z(e,n=!1){const t=document.activeElement;for(const o of e)if(o===t||(o.focus({preventScroll:n}),document.activeElement!==t))return}function pe(e,n){return e.map((t,o)=>e[(n+o)%e.length])}var Te=k,Fe=G;function xe(e,n){return s.useReducer((t,o)=>n[t][o]??t,e)}var ve=e=>{const{present:n,children:t}=e,o=he(n),i=typeof t=="function"?t({present:o.isPresent}):s.Children.only(t),d=D(o.ref,Ne(i));return typeof t=="function"||o.isPresent?s.cloneElement(i,{ref:d}):null};ve.displayName="Presence";function he(e){const[n,t]=s.useState(),o=s.useRef(null),i=s.useRef(e),d=s.useRef("none"),g=e?"mounted":"unmounted",[b,m]=xe(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const c=F(o.current);d.current=b==="mounted"?c:"none"},[b]),O(()=>{const c=o.current,l=i.current;if(l!==e){const x=d.current,f=F(c);e?m("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?m("UNMOUNT"):m(l&&x!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,m]),O(()=>{if(n){let c;const l=n.ownerDocument.defaultView??window,p=f=>{const u=F(o.current).includes(f.animationName);if(f.target===n&&u&&(m("ANIMATION_END"),!i.current)){const a=n.style.animationFillMode;n.style.animationFillMode="forwards",c=l.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=a)})}},x=f=>{f.target===n&&(d.current=F(o.current))};return n.addEventListener("animationstart",x),n.addEventListener("animationcancel",p),n.addEventListener("animationend",p),()=>{l.clearTimeout(c),n.removeEventListener("animationstart",x),n.removeEventListener("animationcancel",p),n.removeEventListener("animationend",p)}}else m("ANIMATION_END")},[n,m]),{isPresent:["mounted","unmountSuspended"].includes(b),ref:s.useCallback(c=>{o.current=c?getComputedStyle(c):null,t(c)},[])}}function F(e){return(e==null?void 0:e.animationName)||"none"}function Ne(e){var o,i;let n=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}const K=s.forwardRef(({className:e="",value:n=0,max:t=100,...o},i)=>{const d=n.toString(),g=t.toString();return r.jsx("div",{ref:i,role:"progressbar","aria-valuemin":"0","aria-valuemax":g,"aria-valuenow":d,className:`relative h-2 w-full overflow-hidden rounded-full bg-gray-100 ${e}`,...o,children:r.jsx("div",{className:"h-full w-full flex-1 bg-blue-600 transition-all",style:{transform:`translateX(-${100-n/t*100}%)`}})})});K.displayName="Progress";const Re=({status:e,currentStep:n=0,totalSteps:t=1,estimatedTimeRemaining:o,statusMessage:i,error:d,onCancel:g})=>{const[b,m]=s.useState(0),[c,l]=s.useState(0),[p]=s.useState(Date.now());s.useEffect(()=>{if(e==="idle")m(0);else if(e==="complete")m(100);else if(e!=="error"){const u=t>0?n/t*100:0;m(Math.min(Math.max(u,0),99))}},[e,n,t]),s.useEffect(()=>{let u;return(e==="preparing"||e==="analyzing")&&(u=setInterval(()=>{l(Math.floor((Date.now()-p)/1e3))},1e3)),()=>{u&&clearInterval(u)}},[e,p]);const x=u=>{if(u<60)return`${u}s`;const a=Math.floor(u/60),N=u%60;return`${a}m ${N}s`},f=()=>{switch(e){case"idle":return r.jsx(se,{className:"h-5 w-5 text-gray-500"});case"preparing":case"analyzing":return r.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});case"complete":return r.jsx(oe,{className:"h-5 w-5 text-green-500"});case"error":return r.jsx(re,{className:"h-5 w-5 text-red-500"});default:return null}},y=()=>{if(i)return i;switch(e){case"idle":return"Waiting to start analysis...";case"preparing":return"Preparing analysis...";case"analyzing":return n&&t?`Analyzing (Step ${n} of ${t})...`:"Analyzing...";case"complete":return"Analysis complete";case"error":return(d==null?void 0:d.message)||"An error occurred during analysis";default:return""}};return r.jsxs("div",{className:`rounded-lg p-4 ${e==="error"?"bg-red-50":e==="complete"?"bg-green-50":"bg-blue-50"}`,children:[r.jsxs("div",{className:"flex items-center mb-3",children:[f(),r.jsx("span",{className:`ml-2 font-medium ${e==="error"?"text-red-700":e==="complete"?"text-green-700":"text-blue-700"}`,children:y()})]}),r.jsx(K,{value:b,className:`h-2 ${e==="error"?"bg-red-100":e==="complete"?"bg-green-100":"bg-blue-100"}`}),r.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[r.jsx("div",{className:"text-gray-600",children:e==="preparing"||e==="analyzing"?r.jsxs(r.Fragment,{children:["Elapsed time: ",x(c)]}):e==="complete"?r.jsxs(r.Fragment,{children:["Total time: ",x(c)]}):null}),r.jsx("div",{className:"text-gray-600",children:o!==void 0&&e!=="complete"&&e!=="error"&&r.jsxs(r.Fragment,{children:["Est. remaining: ",x(o)]})})]}),t>1&&e!=="idle"&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"flex justify-between mb-1",children:[r.jsx("span",{className:"text-xs text-gray-600",children:"Progress"}),r.jsxs("span",{className:"text-xs text-gray-600",children:[n," of ",t," steps"]})]}),r.jsx("div",{className:"flex space-x-1",children:Array.from({length:t}).map((u,a)=>r.jsx("div",{className:`h-1.5 rounded-full flex-1 ${a<n?"bg-blue-500":a===n&&(e==="preparing"||e==="analyzing")?"bg-blue-300":"bg-gray-200"}`},a))})]}),e==="error"&&d&&r.jsx("div",{className:"mt-3 p-2 bg-red-100 rounded text-sm text-red-800",children:d.message}),(e==="preparing"||e==="analyzing")&&g&&r.jsx("div",{className:"mt-3 flex justify-end",children:r.jsxs(ne,{variant:"ghost",size:"sm",onClick:g,className:"text-gray-500 hover:text-gray-700",children:[r.jsx(te,{className:"h-4 w-4 mr-1"}),"Cancel"]})})]})};export{Re as A,Fe as I,ve as P,Te as R,A as a,Ae as c};
