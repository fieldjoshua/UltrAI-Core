{"version":3,"file":"ModelRunnerDemo-CRyPaatr.js","sources":["../../src/pages/ModelRunnerDemo.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Base URL for API (can be overridden from environment)\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:8000';\n\ninterface Model {\n  name: string;\n}\n\nconst ModelRunnerDemo: React.FC = () => {\n  const [models, setModels] = useState<string[]>([]);\n  const [selectedModel, setSelectedModel] = useState<string>('');\n  const [prompt, setPrompt] = useState<string>('');\n  const [response, setResponse] = useState<string>('');\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch available models on component mount\n  useEffect(() => {\n    const fetchModels = async () => {\n      try {\n        setIsLoading(true);\n        const response = await axios.get(`${API_URL}/api/modelrunner/models`);\n        setModels(response.data.models || []);\n        if (response.data.models && response.data.models.length > 0) {\n          setSelectedModel(response.data.models[0]);\n        }\n      } catch (err) {\n        console.error('Error fetching models:', err);\n        setError(\n          'Failed to fetch models. Make sure Docker Model Runner is running.'\n        );\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchModels();\n  }, []);\n\n  // Handle form submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!prompt) return;\n\n    try {\n      setIsLoading(true);\n      setResponse('');\n      setError(null);\n\n      const response = await axios.post(`${API_URL}/api/modelrunner/generate`, {\n        prompt,\n        model: selectedModel,\n      });\n\n      const apiResponse = response.data.response;\n      setResponse(\n        typeof apiResponse === 'string' \n          ? apiResponse \n          : typeof apiResponse === 'object' && apiResponse !== null\n            ? JSON.stringify(apiResponse, null, 2)\n            : String(apiResponse || 'No response received')\n      );\n    } catch (err: any) {\n      console.error('Error generating response:', err);\n      setError(err.response?.data?.detail || 'Failed to generate response');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">Docker Model Runner Demo</h1>\n\n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          <p>{error}</p>\n        </div>\n      )}\n\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n        <h2 className=\"text-xl font-semibold mb-4\">Available Models</h2>\n        {isLoading && models.length === 0 ? (\n          <p>Loading models...</p>\n        ) : models.length > 0 ? (\n          <div className=\"mb-4\">\n            <select\n              className=\"w-full p-2 border rounded\"\n              value={selectedModel}\n              onChange={(e) => setSelectedModel(e.target.value)}\n            >\n              {models.map((model) => (\n                <option key={model} value={model}>\n                  {model}\n                </option>\n              ))}\n            </select>\n          </div>\n        ) : (\n          <p>\n            No models available. Please make sure Docker Model Runner is\n            running.\n          </p>\n        )}\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <h2 className=\"text-xl font-semibold mb-4\">Generate Response</h2>\n        <form onSubmit={handleSubmit}>\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium mb-2\">Prompt</label>\n            <textarea\n              className=\"w-full p-2 border rounded\"\n              rows={4}\n              value={prompt}\n              onChange={(e) => setPrompt(e.target.value)}\n              placeholder=\"Enter your prompt here...\"\n              disabled={isLoading}\n            />\n          </div>\n          <button\n            type=\"submit\"\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n            disabled={isLoading || !selectedModel || !prompt}\n          >\n            {isLoading ? 'Generating...' : 'Generate'}\n          </button>\n        </form>\n\n        {response && (\n          <div className=\"mt-6\">\n            <h3 className=\"text-lg font-medium mb-2\">Response</h3>\n            <div className=\"bg-gray-50 p-4 rounded border whitespace-pre-wrap\">\n              {response}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ModelRunnerDemo;\n"],"names":["API_URL","ModelRunnerDemo","models","setModels","useState","selectedModel","setSelectedModel","prompt","setPrompt","response","setResponse","isLoading","setIsLoading","error","setError","useEffect","axios","err","handleSubmit","e","apiResponse","_b","_a","jsxs","jsx","model"],"mappings":"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"}