import{j as e}from"./ui-vendor-D-O2a1No.js";import{a as i}from"./react-vendor-B5BC_0HN.js";import{c as $,B as z,X as C}from"./index-CuN-ho9y.js";import{C as E}from"./circle-alert-B2M79VZH.js";import{C as A}from"./circle-check-big-CbQzIIg2.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),u=i.forwardRef(({className:r="",value:l=0,max:n=100,...o},m)=>{const c=l.toString(),d=n.toString();return e.jsx("div",{ref:m,role:"progressbar","aria-valuemin":"0","aria-valuemax":d,"aria-valuenow":c,className:`relative h-2 w-full overflow-hidden rounded-full bg-gray-100 ${r}`,...o,children:e.jsx("div",{className:"h-full w-full flex-1 bg-blue-600 transition-all",style:{transform:`translateX(-${100-l/n*100}%)`}})})});u.displayName="Progress";const F=({status:r,currentStep:l=0,totalSteps:n=1,estimatedTimeRemaining:o,statusMessage:m,error:c,onCancel:d})=>{const[y,g]=i.useState(0),[f,j]=i.useState(0),[h]=i.useState(Date.now()),[v,N]=i.useState(!1);i.useEffect(()=>{var a;try{const s=window.matchMedia("(prefers-reduced-motion: reduce)"),t=()=>N(!!s.matches);return t(),(a=s.addEventListener)==null||a.call(s,"change",t),()=>{var p;(p=s.removeEventListener)==null||p.call(s,"change",t)}}catch{}},[]),i.useEffect(()=>{if(r==="idle")g(0);else if(r==="complete")g(100);else if(r!=="error"){const a=n>0?l/n*100:0;g(Math.min(Math.max(a,0),99))}},[r,l,n]),i.useEffect(()=>{let a;return(r==="preparing"||r==="analyzing")&&(a=setInterval(()=>{j(Math.floor((Date.now()-h)/1e3))},1e3)),()=>{a&&clearInterval(a)}},[r,h]);const x=a=>{if(a<60)return`${a}s`;const s=Math.floor(a/60),t=a%60;return`${s}m ${t}s`},b=()=>{switch(r){case"idle":return e.jsx(k,{className:"h-5 w-5 text-gray-500"});case"preparing":case"analyzing":return e.jsxs("svg",{className:`${v?"animate-none":"animate-spin"} h-5 w-5 text-blue-500`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});case"complete":return e.jsx(A,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(E,{className:"h-5 w-5 text-red-500"});default:return null}},w=()=>{if(m)return m;switch(r){case"idle":return"Waiting to start analysis...";case"preparing":return"Preparing analysis...";case"analyzing":return l&&n?`Analyzing (Step ${l} of ${n})...`:"Analyzing...";case"complete":return"Analysis complete";case"error":return(c==null?void 0:c.message)||"An error occurred during analysis";default:return""}};return e.jsxs("div",{className:`rounded-lg p-4 ${r==="error"?"bg-red-50":r==="complete"?"bg-green-50":"bg-blue-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[b(),e.jsx("span",{className:`ml-2 font-medium ${r==="error"?"text-red-700":r==="complete"?"text-green-700":"text-blue-700"}`,children:w()})]}),e.jsx(u,{value:y,className:`h-2 ultra-neon-progress ${r==="error"?"bg-red-100":r==="complete"?"bg-green-100":"bg-blue-100"}`}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[e.jsx("div",{className:"text-gray-600",children:r==="preparing"||r==="analyzing"?e.jsxs(e.Fragment,{children:["Elapsed time: ",x(f)]}):r==="complete"?e.jsxs(e.Fragment,{children:["Total time: ",x(f)]}):null}),e.jsx("div",{className:"text-gray-600",children:o!==void 0&&r!=="complete"&&r!=="error"&&e.jsxs(e.Fragment,{children:["Est. remaining: ",x(o)]})})]}),n>1&&r!=="idle"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[l," of ",n," steps"]})]}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:n}).map((a,s)=>e.jsx("div",{className:`h-1.5 rounded-full flex-1 ${s<l?"bg-blue-500":s===l&&(r==="preparing"||r==="analyzing")?"bg-blue-300":"bg-gray-200"}`},s))})]}),r==="error"&&c&&e.jsx("div",{className:"mt-3 p-2 bg-red-100 rounded text-sm text-red-800",children:c.message}),(r==="preparing"||r==="analyzing")&&d&&e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs(z,{variant:"ghost",size:"sm",onClick:d,className:"text-gray-500 hover:text-gray-700",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),"Cancel"]})})]})};export{F as A};
//# sourceMappingURL=AnalysisProgress-DRVd5b4R.js.map
