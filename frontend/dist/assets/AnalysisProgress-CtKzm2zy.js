import{r as i,j as e,B as N,Z as b,_ as w}from"./index-CI8fYnCY.js";import{C as z}from"./circle-alert-DVI0YP2R.js";import{C as $}from"./circle-check-big--0qag8UN.js";const h=i.forwardRef(({className:r="",value:l=0,max:a=100,...t},m)=>{const n=l.toString(),o=a.toString();return e.jsx("div",{ref:m,role:"progressbar","aria-valuemin":"0","aria-valuemax":o,"aria-valuenow":n,className:`relative h-2 w-full overflow-hidden rounded-full bg-gray-100 ${r}`,...t,children:e.jsx("div",{className:"h-full w-full flex-1 bg-blue-600 transition-all",style:{transform:`translateX(-${100-l/a*100}%)`}})})});h.displayName="Progress";const P=({status:r,currentStep:l=0,totalSteps:a=1,estimatedTimeRemaining:t,statusMessage:m,error:n,onCancel:o})=>{const[p,g]=i.useState(0),[d,j]=i.useState(0),[f]=i.useState(Date.now());i.useEffect(()=>{if(r==="idle")g(0);else if(r==="complete")g(100);else if(r!=="error"){const s=a>0?l/a*100:0;g(Math.min(Math.max(s,0),99))}},[r,l,a]),i.useEffect(()=>{let s;return(r==="preparing"||r==="analyzing")&&(s=setInterval(()=>{j(Math.floor((Date.now()-f)/1e3))},1e3)),()=>{s&&clearInterval(s)}},[r,f]);const x=s=>{if(s<60)return`${s}s`;const c=Math.floor(s/60),u=s%60;return`${c}m ${u}s`},y=()=>{switch(r){case"idle":return e.jsx(w,{className:"h-5 w-5 text-gray-500"});case"preparing":case"analyzing":return e.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});case"complete":return e.jsx($,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(z,{className:"h-5 w-5 text-red-500"});default:return null}},v=()=>{if(m)return m;switch(r){case"idle":return"Waiting to start analysis...";case"preparing":return"Preparing analysis...";case"analyzing":return l&&a?`Analyzing (Step ${l} of ${a})...`:"Analyzing...";case"complete":return"Analysis complete";case"error":return(n==null?void 0:n.message)||"An error occurred during analysis";default:return""}};return e.jsxs("div",{className:`rounded-lg p-4 ${r==="error"?"bg-red-50":r==="complete"?"bg-green-50":"bg-blue-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[y(),e.jsx("span",{className:`ml-2 font-medium ${r==="error"?"text-red-700":r==="complete"?"text-green-700":"text-blue-700"}`,children:v()})]}),e.jsx(h,{value:p,className:`h-2 ${r==="error"?"bg-red-100":r==="complete"?"bg-green-100":"bg-blue-100"}`}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[e.jsx("div",{className:"text-gray-600",children:r==="preparing"||r==="analyzing"?e.jsxs(e.Fragment,{children:["Elapsed time: ",x(d)]}):r==="complete"?e.jsxs(e.Fragment,{children:["Total time: ",x(d)]}):null}),e.jsx("div",{className:"text-gray-600",children:t!==void 0&&r!=="complete"&&r!=="error"&&e.jsxs(e.Fragment,{children:["Est. remaining: ",x(t)]})})]}),a>1&&r!=="idle"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[l," of ",a," steps"]})]}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:a}).map((s,c)=>e.jsx("div",{className:`h-1.5 rounded-full flex-1 ${c<l?"bg-blue-500":c===l&&(r==="preparing"||r==="analyzing")?"bg-blue-300":"bg-gray-200"}`},c))})]}),r==="error"&&n&&e.jsx("div",{className:"mt-3 p-2 bg-red-100 rounded text-sm text-red-800",children:n.message}),(r==="preparing"||r==="analyzing")&&o&&e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs(N,{variant:"ghost",size:"sm",onClick:o,className:"text-gray-500 hover:text-gray-700",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),"Cancel"]})})]})};export{P as A};
//# sourceMappingURL=AnalysisProgress-CtKzm2zy.js.map
